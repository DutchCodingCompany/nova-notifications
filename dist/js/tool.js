(()=>{"use strict";var t,n={930:(t,n,e)=>{function o(t,n,e,o,i,a,r,s){var c,l="function"==typeof t?t.options:t;if(n&&(l.render=n,l.staticRenderFns=e,l._compiled=!0),o&&(l.functional=!0),a&&(l._scopeId="data-v-"+a),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,n){return c.call(n),u(t,n)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}const i=o({props:{external:{type:Boolean,default:!1},href:{type:String},classList:{type:Array}}},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.external?e("a",{class:t.classList,attrs:{href:t.href,target:"_blank"},on:{click:function(n){return t.$emit("click")}}},[t._t("default")],2):e("router-link",{class:t.classList,attrs:{to:t.href},nativeOn:{click:function(n){return t.$emit("click")}}},[t._t("default")],2)],1)}),[],!1,null,null,null).exports;const a=o({props:{notification:{type:Object}},data:function(){return{createdAt:null}},mounted:function(){setInterval(this.setCreatedAt,1e3)},methods:{setCreatedAt:function(){this.createdAt=new moment(this.notification.data.created_at).fromNow()},markAsRead:function(){axios.patch("/nova-vendor/nova-notifications/"+this.notification.id).then((function(t){t.data.notification.read_at&&Nova.$emit("notification-read",{notification:t.data.notification})}))},formatRouterLink:function(t){return t.data.route?{name:t.data.route.name,params:t.data.route.params}:t.data.external?t.data.url||"#":{path:t.data.url||"#"}}}},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"block no-underline text-90 hover:bg-30 p-3"},[e("div",{staticClass:"flex justify-between"},[e("notification-link",{attrs:{href:t.formatRouterLink(t.notification),external:t.notification.data.external,classList:["no-underline","text-black","flex-1"]},nativeOn:{click:function(n){return t.markAsRead()}}},[t._t("content",(function(){return[e("h4",{staticClass:"no-underline dim text-primary font-bold pb-2"},[t._v(t._s(t.notification.data.title))]),t._v(" "),t.notification.data.subtitle?e("p",{staticClass:"pb-2 font-normal"},[t._v("\n                    "+t._s(t.notification.data.subtitle)+"\n                ")]):t._e(),t._v(" "),e("p",{staticClass:"font-normal text-sm"},[t._v("\n                    "+t._s(t.createdAt)+"\n                ")])]}))],2),t._v(" "),null===t.notification.read_at?e("button",{staticClass:"btn",on:{click:function(n){return t.markAsRead()}}},[t._t("action",(function(){return[t._v("\n                "+t._s(t.__("mark read"))+"\n            ")]}))],2):t._e()],1)])}),[],!1,null,null,null).exports;const r={data:function(){return{count:0,notifications:[],isLoading:!0,sound:Nova.config.default_sound}},mounted:function(){var t=this;t.loadNotifications((function(n){Echo.private(Nova.config.user_model_namespace+"."+n.data.user_id).notification(t.notificationReceived)})),Nova.$on("notification-read",(function(n){t.notifications[n.notification.id]=n.notification,t.count--}))},methods:{loadNotifications:function(t){var n=this;axios.get("/nova-vendor/nova-notifications/unread").then((function(e){n.isLoading=!1,n.count=e.data.count,n.notifications=e.data.notifications,t&&t(e)}))},playSound:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sound;Nova.config.play_sound&&new Audio(t).play()},notificationReceived:function(t){var n=this;n.loadNotifications();var e="info";-1!==["success","info","error"].indexOf(t.level)&&(e=t.level);var o={text:n.__("Mark as Read"),onClick:function(e,o){n.$refs["notification-"+t.id][0].markAsRead(),o.goAway(0)}},i={text:n.__("Cancel"),onClick:function(t,n){n.goAway(0)}},a=[];t.show_mark_as_read&&a.push(o),t.show_cancel&&a.push(i),!(!t.display_toasted&&!Nova.config.toasted_enabled)&&n.$toasted.show(t.title,{type:e,keepOnHover:!0,icon:t.icon||null,iconPack:"custom-class",action:a}),t.play_sound&&this.playSound(t.sound)},markAllAsRead:function(){var t=this;axios.patch("/nova-vendor/nova-notifications").then((function(){t.notifications=[],t.count=0}))}}};var s=e(379),c=e.n(s),l=e(12),u={insert:"head",singleton:!1};c()(l.Z,u);l.Z.locals;const d=o(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("dropdown",{staticClass:"ml-auto h-9 flex items-center dropdown-right"},[e("dropdown-trigger",{staticClass:"h-9 flex items-center"},[e("span",{staticClass:"relative"},[e("svg",{staticClass:"ml-2 text-90 w-8",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M15 19a3 3 0 0 1-6 0H4a1 1 0 0 1 0-2h1v-6a7 7 0 0 1 4.02-6.34 3 3 0 0 1 5.96 0A7 7 0 0 1 19 11v6h1a1 1 0 0 1 0 2h-5zm-4 0a1 1 0 0 0 2 0h-2zm0-12.9A5 5 0 0 0 7 11v6h10v-6a5 5 0 0 0-4-4.9V5a1 1 0 0 0-2 0v1.1z"}})]),t._v(" "),t.count>0?e("span",{staticClass:"absolute -mt-4 -mr-1 text-xs bg-danger text-danger-light text-sm font-bold px-1 shadow-lg rounded-lg right-0 bottom-0"},[t.count<9?e("span",[t._v(t._s(t.count))]):e("span",[t._v("9+")])]):t._e()])]),t._v(" "),e("dropdown-menu",{attrs:{slot:"menu",width:"600",direction:"rtl"},slot:"menu"},[e("loading-view",{attrs:{loading:t.isLoading}},[e("div",{staticClass:"flex justify-between bg-40 text-90 p-4"},[e("h3",[t._v(t._s(t.__("Notifications")))]),t._v(" "),0!==t.count?e("button",{staticClass:"btn",on:{click:function(n){return t.markAllAsRead()}}},[t._v("\n                    "+t._s(t.__("mark all as read"))+"\n                ")]):t._e()]),t._v(" "),0===t.count?e("p",{staticClass:"block p-3"},[t._v("\n                "+t._s(t.__("No new notifications"))+"\n            ")]):e("scroll-wrap",{attrs:{height:"350"}},[t._t("default",(function(){return t._l(t.notifications,(function(t){return e("notification-item",{key:t.id,ref:"notification-"+t.id,refInFor:!0,attrs:{notification:t}})}))}))],2)],1)],1)],1)}),[],!1,null,"0b1172c6",null).exports;Nova.booting((function(t,n,e){t.component("notification-link",i),t.component("notification-item",a),t.component("notifications-dropdown",d)}))},12:(t,n,e)=>{e.d(n,{Z:()=>a});var o=e(519),i=e.n(o)()((function(t){return t[1]}));i.push([t.id,"#max-height[data-v-0b1172c6]{max-height:30rem}.bg-light-gray[data-v-0b1172c6]{background-color:#eee}.bg-light-gray[data-v-0b1172c6]:hover{background-color:#fefefe}",""]);const a=i},519:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=t(n);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,o){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(o)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);o&&i[c[0]]||(e&&(c[2]?c[2]="".concat(e," and ").concat(c[2]):c[2]=e),n.push(c))}},n}},34:()=>{},379:(t,n,e)=>{var o,i=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},a=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),r=[];function s(t){for(var n=-1,e=0;e<r.length;e++)if(r[e].identifier===t){n=e;break}return n}function c(t,n){for(var e={},o=[],i=0;i<t.length;i++){var a=t[i],c=n.base?a[0]+n.base:a[0],l=e[c]||0,u="".concat(c," ").concat(l);e[c]=l+1;var d=s(u),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(r[d].references++,r[d].updater(f)):r.push({identifier:u,updater:m(f,n),references:1}),o.push(u)}return o}function l(t){var n=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var i=e.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(t){n.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(n);else{var r=a(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var u,d=(u=[],function(t,n){return u[t]=n,u.filter(Boolean).join("\n")});function f(t,n,e,o){var i=e?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=d(n,i);else{var a=document.createTextNode(i),r=t.childNodes;r[n]&&t.removeChild(r[n]),r.length?t.insertBefore(a,r[n]):t.appendChild(a)}}function v(t,n,e){var o=e.css,i=e.media,a=e.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var p=null,h=0;function m(t,n){var e,o,i;if(n.singleton){var a=h++;e=p||(p=l(n)),o=f.bind(null,e,a,!1),i=f.bind(null,e,a,!0)}else e=l(n),o=v.bind(null,e,n),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return o(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;o(t=n)}else i()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=i());var e=c(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<e.length;o++){var i=s(e[o]);r[i].references--}for(var a=c(t,n),l=0;l<e.length;l++){var u=s(e[l]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}e=a}}}}},e={};function o(t){var i=e[t];if(void 0!==i)return i.exports;var a=e[t]={id:t,exports:{}};return n[t](a,a.exports,o),a.exports}o.m=n,t=[],o.O=(n,e,i,a)=>{if(!e){var r=1/0;for(u=0;u<t.length;u++){for(var[e,i,a]=t[u],s=!0,c=0;c<e.length;c++)(!1&a||r>=a)&&Object.keys(o.O).every((t=>o.O[t](e[c])))?e.splice(c--,1):(s=!1,a<r&&(r=a));if(s){t.splice(u--,1);var l=i();void 0!==l&&(n=l)}}return n}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[e,i,a]},o.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return o.d(n,{a:n}),n},o.d=(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{var t={103:0,990:0};o.O.j=n=>0===t[n];var n=(n,e)=>{var i,a,[r,s,c]=e,l=0;if(r.some((n=>0!==t[n]))){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(c)var u=c(o)}for(n&&n(e);l<r.length;l++)a=r[l],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(u)},e=self.webpackChunk=self.webpackChunk||[];e.forEach(n.bind(null,0)),e.push=n.bind(null,e.push.bind(e))})(),o.nc=void 0,o.O(void 0,[990],(()=>o(930)));var i=o.O(void 0,[990],(()=>o(34)));i=o.O(i)})();